{"ast":null,"code":"import _asyncToGenerator from \"/Users/glenn/Projects/glennantoine/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { CLARITY_MOTION_REVERSE_ANIMATION_SUFFIX as t, AnimationStatus as n, CLARITY_MOTION_REVERSE_ANIMATION_LABEL as i, CLARITY_MOTION_FALLBACK_EASING as o, CLARITY_MOTION_FALLBACK_DURATION_IN_MS as r, CLARITY_MOTION_ENTER_LEAVE_PROPERTY as e } from \"./interfaces.js\";\nimport { LogService as s } from \"../services/log.service.js\";\nimport { ClarityMotion as u } from \"./motion.service.js\";\nimport a from \"ramda/es/clone.js\";\nimport { isCssPropertyName as c, getCssPropertyValue as f } from \"../utils/css.js\";\nimport { isSuffixedBy as l, getNumericValueFromCssSecondsStyleValue as m, isPrefixedBy as d, removePrefix as p } from \"../utils/string.js\";\nimport { queryChildFromLightOrShadowDom as h } from \"../utils/dom.js\";\nimport { allPropertiesPass as g, getMillisecondsFromSeconds as v } from \"../utils/identity.js\";\n\nfunction y(_x, _x2) {\n  return _y.apply(this, arguments);\n}\n\nfunction _y() {\n  _y = _asyncToGenerator(function* (t, n) {\n    if (!n._animations) return s.warn(n.tagName.toLocaleLowerCase() + \" is trying to animate but no animations are defined.\"), !1;\n    const i = z(n._animations, t);\n    return yield Promise.all(i.map(i => {\n      const [o, r] = i;\n      if (t.get(o) === n[o]) return !1;\n      const e = r[n[o].toString()],\n            s = n.cdsMotion,\n            [u, c] = M(e, x(s, o, n[o].toString()));\n      let f = a(c);\n      if (f.length < 1) return !1;\n      f = O(u, f, n);\n      const l = A(e, f, n);\n      return Promise.all(l).then(() => (j(e, n), !0));\n    })).then(t => t.indexOf(!0) > -1).catch(() => !1);\n  });\n  return _y.apply(this, arguments);\n}\n\nfunction w(t, i) {\n  i.getAttribute(\"_cds-animation-status\") !== n.active && (i.setAttribute(\"_cds-animation-status\", n.active), i.cdsMotionChange.emit(`${t} animation ${n.start}`));\n}\n\nfunction j(t, i) {\n  i.setAttribute(\"_cds-animation-status\", n.ready), i.cdsMotionChange.emit(`${t} animation ${n.end}`);\n}\n\nfunction O(t, n, i) {\n  const o = i.cdsMotion,\n        r = !o || \"off\" === o;\n  return b(t) && (n = C(n)), r ? B(n) : $(n = N(n, i), i);\n}\n\nfunction A(t, n, i) {\n  return n.filter(t => !t.onlyIf || g(i, t.onlyIf)).map(n => (w(t, i), new Promise(t => {\n    const o = P(i, n.target).animate(S(n.animation, i), n.options || {}),\n          r = () => {\n      t(\"animation finished\"), o.removeEventListener(\"finish\", r);\n    };\n\n    o.addEventListener(\"finish\", r);\n  })));\n}\n\nfunction P(t, n) {\n  return h(t, n) || t;\n}\n\nfunction S(t, n) {\n  return Array.isArray(t) ? R(t, n) : t;\n}\n\nfunction b(n) {\n  return l(n, t);\n}\n\nfunction C(t) {\n  return t.map(t => (t.options ? t.options.direction = i : t.options = {\n    direction: i\n  }, t));\n}\n\nfunction _(t) {\n  return t + \"-\" + i;\n}\n\nfunction x(t, n, i) {\n  if (!t || !n || void 0 === i) return \"\";\n  if (\"on\" === t || \"off\" === t) return \"\";\n  let o;\n\n  try {\n    o = JSON.parse(t);\n  } catch (t) {\n    return \"\";\n  }\n\n  return o[n] && o[n][i] || \"\";\n}\n\nfunction E(n) {\n  return b(n) ? n.slice(0, -1 * t.length) : n;\n}\n\nfunction L(t, n) {\n  return n && u.has(E(n)) ? n : t;\n}\n\nfunction M(t, n) {\n  const i = L(t, n);\n  return [i, a(u.get(E(i)))];\n}\n\nfunction N(t, n) {\n  return I(\"duration\", n, t, r, t => v(m(t)));\n}\n\nfunction $(t, n) {\n  return I(\"easing\", n, t, o);\n}\n\nfunction B(t) {\n  return t.map(t => (t.options ? (t.options.duration = 0, t.options.easing = o) : t.options = {\n    duration: 0,\n    easing: o\n  }, t));\n}\n\nfunction I(t, n, i, o, r) {\n  return i.map(i => {\n    if (i.options) {\n      if (i.options[t]) {\n        if (c(i.options[t])) {\n          const e = i.options[t];\n          let s = f(e, n);\n          s ? r && (s = r(s)) : s = o, i.options[t] = s;\n        }\n      } else i.options[t] = o;\n    } else {\n      const n = {};\n      n[t] = o, i.options = n;\n    }\n    return i;\n  });\n}\n\nfunction R(t, n) {\n  return Array.isArray(t) ? t.map(t => {\n    var i, o, r, e;\n\n    if ((null == t ? void 0 : t.hasOwnProperty(\"height\")) && d((null === (i = null == t ? void 0 : t.height) || void 0 === i ? void 0 : i.toString()) || \"\", \"from:\")) {\n      const i = p((null === (o = null == t ? void 0 : t.height) || void 0 === o ? void 0 : o.toString()) || \"\", \"from:\"),\n            r = h(n, i) || null;\n      t.height = r ? r.getBoundingClientRect().height + \"px\" : \"auto\";\n    }\n\n    if ((null == t ? void 0 : t.hasOwnProperty(\"width\")) && d((null === (r = null == t ? void 0 : t.width) || void 0 === r ? void 0 : r.toString()) || \"\", \"from:\")) {\n      const i = p((null === (e = null == t ? void 0 : t.width) || void 0 === e ? void 0 : e.toString()) || \"\", \"from:\"),\n            o = h(n, i) || null;\n      t.width = o ? o.getBoundingClientRect().width + \"px\" : \"auto\";\n    }\n\n    return t;\n  }) : t;\n}\n\nfunction J(t, n) {\n  if (null == t) return null;\n  let i = !0;\n  const o = {};\n  return Object.getOwnPropertyNames(t).forEach(r => {\n    n.has(r) && (o[r] = a(t[r]), i = !1);\n  }), i ? null : o;\n}\n\nfunction k(t, n) {\n  if (null == t) return [];\n  const [i, o] = t;\n  return i.length > 0 ? n ? [].concat(o, i) : [].concat(i, o) : o;\n}\n\nfunction q(t) {\n  const n = [],\n        i = [];\n  return Object.getOwnPropertyNames(t || {}).forEach(o => {\n    const r = [o, a(t[o])];\n    o === e ? n.push(r) : i.push(r);\n  }), [n, i];\n}\n\nfunction z(t, n) {\n  const i = J(t || {}, n);\n  return null === i ? [] : k(q(i), n.get(e));\n}\n\nexport { b as animationIsReversed, E as extractAnimationNameIfReversed, J as filterAnimationsByUpdatedProperties, k as flattenAndSortAnimations, M as getAnimationConfigForPropertyValue, L as getAnimationFromOverrideOrDecorator, S as getAnimationKeyframesOrPropertyIndexedFrames, A as getAnimationPromiseInstructions, P as getAnimationTarget, q as getHidingAndNonHidingPropertyAnimations, x as getInlineOverride, z as getPropertyAnimations, j as resolveAnimationEndStatus, _ as reverseAnimation, C as reverseAnimationConfig, y as runPropertyAnimations, O as setAnimationConfigOptions, N as setAnimationDuration, $ as setAnimationEasing, I as setAnimationProperty, w as setAnimationStartStatus, R as sizeDimensionKeyframes, B as zeroOutAnimationConfig };","map":{"version":3,"sources":["/Users/glenn/Projects/glennantoine/node_modules/@cds/core/internal/motion/utils.js"],"names":["CLARITY_MOTION_REVERSE_ANIMATION_SUFFIX","t","AnimationStatus","n","CLARITY_MOTION_REVERSE_ANIMATION_LABEL","i","CLARITY_MOTION_FALLBACK_EASING","o","CLARITY_MOTION_FALLBACK_DURATION_IN_MS","r","CLARITY_MOTION_ENTER_LEAVE_PROPERTY","e","LogService","s","ClarityMotion","u","a","isCssPropertyName","c","getCssPropertyValue","f","isSuffixedBy","l","getNumericValueFromCssSecondsStyleValue","m","isPrefixedBy","d","removePrefix","p","queryChildFromLightOrShadowDom","h","allPropertiesPass","g","getMillisecondsFromSeconds","v","y","_animations","warn","tagName","toLocaleLowerCase","z","Promise","all","map","get","toString","cdsMotion","M","x","length","O","A","then","j","indexOf","catch","w","getAttribute","active","setAttribute","cdsMotionChange","emit","start","ready","end","b","C","B","$","N","filter","onlyIf","P","target","animate","S","animation","options","removeEventListener","addEventListener","Array","isArray","R","direction","_","JSON","parse","E","slice","L","has","I","duration","easing","hasOwnProperty","height","getBoundingClientRect","width","J","Object","getOwnPropertyNames","forEach","k","concat","q","push","animationIsReversed","extractAnimationNameIfReversed","filterAnimationsByUpdatedProperties","flattenAndSortAnimations","getAnimationConfigForPropertyValue","getAnimationFromOverrideOrDecorator","getAnimationKeyframesOrPropertyIndexedFrames","getAnimationPromiseInstructions","getAnimationTarget","getHidingAndNonHidingPropertyAnimations","getInlineOverride","getPropertyAnimations","resolveAnimationEndStatus","reverseAnimation","reverseAnimationConfig","runPropertyAnimations","setAnimationConfigOptions","setAnimationDuration","setAnimationEasing","setAnimationProperty","setAnimationStartStatus","sizeDimensionKeyframes","zeroOutAnimationConfig"],"mappings":"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","sourcesContent":["import{CLARITY_MOTION_REVERSE_ANIMATION_SUFFIX as t,AnimationStatus as n,CLARITY_MOTION_REVERSE_ANIMATION_LABEL as i,CLARITY_MOTION_FALLBACK_EASING as o,CLARITY_MOTION_FALLBACK_DURATION_IN_MS as r,CLARITY_MOTION_ENTER_LEAVE_PROPERTY as e}from\"./interfaces.js\";import{LogService as s}from\"../services/log.service.js\";import{ClarityMotion as u}from\"./motion.service.js\";import a from\"ramda/es/clone.js\";import{isCssPropertyName as c,getCssPropertyValue as f}from\"../utils/css.js\";import{isSuffixedBy as l,getNumericValueFromCssSecondsStyleValue as m,isPrefixedBy as d,removePrefix as p}from\"../utils/string.js\";import{queryChildFromLightOrShadowDom as h}from\"../utils/dom.js\";import{allPropertiesPass as g,getMillisecondsFromSeconds as v}from\"../utils/identity.js\";async function y(t,n){if(!n._animations)return s.warn(n.tagName.toLocaleLowerCase()+\" is trying to animate but no animations are defined.\"),!1;const i=z(n._animations,t);return await Promise.all(i.map((i=>{const[o,r]=i;if(t.get(o)===n[o])return!1;const e=r[n[o].toString()],s=n.cdsMotion,[u,c]=M(e,x(s,o,n[o].toString()));let f=a(c);if(f.length<1)return!1;f=O(u,f,n);const l=A(e,f,n);return Promise.all(l).then((()=>(j(e,n),!0)))}))).then((t=>t.indexOf(!0)>-1)).catch((()=>!1))}function w(t,i){i.getAttribute(\"_cds-animation-status\")!==n.active&&(i.setAttribute(\"_cds-animation-status\",n.active),i.cdsMotionChange.emit(`${t} animation ${n.start}`))}function j(t,i){i.setAttribute(\"_cds-animation-status\",n.ready),i.cdsMotionChange.emit(`${t} animation ${n.end}`)}function O(t,n,i){const o=i.cdsMotion,r=!o||\"off\"===o;return b(t)&&(n=C(n)),r?B(n):$(n=N(n,i),i)}function A(t,n,i){return n.filter((t=>!t.onlyIf||g(i,t.onlyIf))).map((n=>(w(t,i),new Promise((t=>{const o=P(i,n.target).animate(S(n.animation,i),n.options||{}),r=()=>{t(\"animation finished\"),o.removeEventListener(\"finish\",r)};o.addEventListener(\"finish\",r)})))))}function P(t,n){return h(t,n)||t}function S(t,n){return Array.isArray(t)?R(t,n):t}function b(n){return l(n,t)}function C(t){return t.map((t=>(t.options?t.options.direction=i:t.options={direction:i},t)))}function _(t){return t+\"-\"+i}function x(t,n,i){if(!t||!n||void 0===i)return\"\";if(\"on\"===t||\"off\"===t)return\"\";let o;try{o=JSON.parse(t)}catch(t){return\"\"}return o[n]&&o[n][i]||\"\"}function E(n){return b(n)?n.slice(0,-1*t.length):n}function L(t,n){return n&&u.has(E(n))?n:t}function M(t,n){const i=L(t,n);return[i,a(u.get(E(i)))]}function N(t,n){return I(\"duration\",n,t,r,(t=>v(m(t))))}function $(t,n){return I(\"easing\",n,t,o)}function B(t){return t.map((t=>(t.options?(t.options.duration=0,t.options.easing=o):t.options={duration:0,easing:o},t)))}function I(t,n,i,o,r){return i.map((i=>{if(i.options)if(i.options[t]){if(c(i.options[t])){const e=i.options[t];let s=f(e,n);s?r&&(s=r(s)):s=o,i.options[t]=s}}else i.options[t]=o;else{const n={};n[t]=o,i.options=n}return i}))}function R(t,n){return Array.isArray(t)?t.map((t=>{var i,o,r,e;if((null==t?void 0:t.hasOwnProperty(\"height\"))&&d((null===(i=null==t?void 0:t.height)||void 0===i?void 0:i.toString())||\"\",\"from:\")){const i=p((null===(o=null==t?void 0:t.height)||void 0===o?void 0:o.toString())||\"\",\"from:\"),r=h(n,i)||null;t.height=r?r.getBoundingClientRect().height+\"px\":\"auto\"}if((null==t?void 0:t.hasOwnProperty(\"width\"))&&d((null===(r=null==t?void 0:t.width)||void 0===r?void 0:r.toString())||\"\",\"from:\")){const i=p((null===(e=null==t?void 0:t.width)||void 0===e?void 0:e.toString())||\"\",\"from:\"),o=h(n,i)||null;t.width=o?o.getBoundingClientRect().width+\"px\":\"auto\"}return t})):t}function J(t,n){if(null==t)return null;let i=!0;const o={};return Object.getOwnPropertyNames(t).forEach((r=>{n.has(r)&&(o[r]=a(t[r]),i=!1)})),i?null:o}function k(t,n){if(null==t)return[];const[i,o]=t;return i.length>0?n?[].concat(o,i):[].concat(i,o):o}function q(t){const n=[],i=[];return Object.getOwnPropertyNames(t||{}).forEach((o=>{const r=[o,a(t[o])];o===e?n.push(r):i.push(r)})),[n,i]}function z(t,n){const i=J(t||{},n);return null===i?[]:k(q(i),n.get(e))}export{b as animationIsReversed,E as extractAnimationNameIfReversed,J as filterAnimationsByUpdatedProperties,k as flattenAndSortAnimations,M as getAnimationConfigForPropertyValue,L as getAnimationFromOverrideOrDecorator,S as getAnimationKeyframesOrPropertyIndexedFrames,A as getAnimationPromiseInstructions,P as getAnimationTarget,q as getHidingAndNonHidingPropertyAnimations,x as getInlineOverride,z as getPropertyAnimations,j as resolveAnimationEndStatus,_ as reverseAnimation,C as reverseAnimationConfig,y as runPropertyAnimations,O as setAnimationConfigOptions,N as setAnimationDuration,$ as setAnimationEasing,I as setAnimationProperty,w as setAnimationStartStatus,R as sizeDimensionKeyframes,B as zeroOutAnimationConfig};\n"]},"metadata":{},"sourceType":"module"}